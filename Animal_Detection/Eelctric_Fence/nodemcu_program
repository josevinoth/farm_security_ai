#include <Wire.h>
#include <LiquidCrystal_I2C.h>


  const int relayPin = 13;  // the pin that the relay is attached to
  const int buzzerPin = 12; // The pin that the buzzer is attached to
  // Set the LCD address and dimensions
  const int lcdColumns = 16;
  const int lcdRows = 2;
  const int lcdAddress = 0x27;  // Change this address to match your LCD

  LiquidCrystal_I2C lcd(lcdAddress, lcdColumns, lcdRows);

  void setup() {
    // Initialize Serial communication
    Serial.begin(9600);
    Serial.println("Arduino Initialized");

    // Initialize the relay pin as an output
    pinMode(relayPin, OUTPUT);

    // Turn off the relay initially
    digitalWrite(relayPin, HIGH);

    // Initialize the LCD
    lcd.begin();  // Begin the LCD
    lcd.backlight();  // Turn on the backlight
    lcd.clear();      // Clear the screen
    lcd.setCursor(0, 0);
    lcd.print("Object: Object");  // Initially, no object detected

  }

  void loop() {
    if (Serial.available() > 0) {
      String detected_object = ""; // Variable to store the received object name

      // Read each character until the end of the string
      while (Serial.available()) {
        char c = Serial.read(); // Read one character
        if (c != '0' && c != '1') {
          detected_object += c;   // Append it to the string
        }
        delay(5);  // Small delay to allow time for the next character
      }

      Serial.print("Received object: ");
      Serial.println(detected_object);

      // Clear the LCD and print the received object directly
      lcd.clear();
      lcd.setCursor(0, 0);
      lcd.print("Object Detected: ");
      lcd.setCursor(0, 1);  // Move cursor to the start of the second line
      lcd.print(detected_object);

      // Control the relay based on the detected object
      if (detected_object == "Human") {
        Serial.println("Turning off relay");
        digitalWrite(relayPin, HIGH); // Turn off the relay
      } else {
        Serial.println("Turning on relay");
        digitalWrite(relayPin, LOW); // Turn on the relay
      }

      // Turn on the buzzer when any object is detected (except 'Human')
      Serial.println("Turning on buzzer");
      digitalWrite(buzzerPin, HIGH); // Turn on the buzzer
      delay(15000);                  // Wait for 30 seconds (30,000 milliseconds)
      Serial.println("Turning off buzzer");
      digitalWrite(buzzerPin, LOW);  // Turn off the buzzer
    }
  }